

<!DOCTYPE html>
<html lang="en">

    <%- include('./partials/head.ejs') %>

<body>

    <%- include('./partials/header.ejs') %>


    <div id="tripleItemGrid">
        <%- include('./partials/leftSideBar.ejs') %>

        <div>



  <div class="info">


                

    <div class="details content">
        <h2><%= user.name %></h2>
        <div class="content">
            <p> <%= user.email %> </p>
            
        </div>
        
        <h2>Materias</h2>

                <div class="flex-table">
                    <div class="flex-item first">
                        <p> Materia </p>
                    </div>
                    <div class="flex-item first">
                        <p> Horas por Semana </p>
                    </div>
                    <div class="flex-item first">
                        <p> Notas </p>
                    </div>
                </div>
                <%const userMaterias = materias.filter(materia => materia.user_id == user._id);%>

                <% if (userMaterias.length > 0) { %>
                    <% userMaterias.forEach(materia => { %>

                    <a class="single" href="/materias/<%= materia._id%>">
                        <div class="flex-table">
                            <div class="flex-item">
                                <p ><%=materia.nombre%></p>
                            </div>
                            <div class="flex-item">
                                <p ><%=materia.horas_semana%></p>
                            </div>
                            <div class="flex-item">
                                <p ><%=materia.horas_semana%></p>
                            </div>
                        </div>   
                    </a>
                   

                    <% }) %>
                   
                <% } else { %>
                    <p> No hay materias que mostrar ):</p>
                   
                <% } %>
                
                <h2>Hobbies</h2>

                <div class="flex-table">
                    <div class="flex-item first">
                        <p> Hobbie </p>
                    </div>
                    <div class="flex-item first">
                        <p> Descripcion </p>
                    </div>
                    <div class="flex-item first">
                        <p> Notas </p>
                    </div>
                </div>

                <%const userHobbies = hobbies.filter(hobbie => hobbie.user_id == user._id);%>
<% if (userHobbies.length > 0) { %>
    <% userHobbies.forEach(hobbie => { %>
        <a class="single " href="/hobbies/<%= hobbie._id%>">

        <div class="flex-table">
            <div class="flex-item">
                <p ><%=hobbie.nombre%></p>
            </div>
            <div class="flex-item">
                <p ><%=hobbie.descripcion%></p>
            </div>
            <div class="flex-item">
                <p ><%=hobbie.notas%></p>
            </div>
        </div>   
        </a>

    <% }) %>
           
<% } else { %>
    <p> No hay hobbies que mostrar ):</p>
   
<% } %>

<h2>Metas</h2>

                <div class="flex-table">
                    <div class="flex-item first">
                        <p> Responsable </p>
                    </div>
                    <div class="flex-item first">
                        <p> Prioridad </p>
                    </div>
                    <div class="flex-item first">
                        <p> estado </p>
                    </div>
                    <div class="flex-item first">
                        <p> fecha de inicio </p>
                    </div>
                    <div class="flex-item first">
                        <p> fecha final </p>
                    </div>
                </div>
          
                <%const userMetas = metas.filter(meta => meta.user_id == user._id);%>

                <% if (userMetas.length > 0) { %>
                    <% userMetas.forEach(meta => { %>
                        <a class="single" href="/metas/<%= meta._id%>">
                        <div class="flex-table">
                            <div class="flex-item">
                                <p ><%=meta.responsable%></p>
                            </div>
                            <div class="flex-item">
                                <p ><%=meta.prioridad%></p>
                            </div>
                            <div class="flex-item">
                                <p ><%=meta.estado%></p>
                            </div>
                            <div class="flex-item">
                                <p ><%=meta.fecha_inicio%></p>
                            </div>
                            <div class="flex-item">
                                <p ><%=meta.fecha_final%></p>
                            </div>
                        </div>   
                        </a>
                    <% }) %>
              

                <% } else { %>
                    <p> No hay metas que mostrar ):</p>
                
                <% } %>

                <h2>Deportes</h2>

                            <div class="flex-table">
                                <div class="flex-item first">
                                    <p> Nombre </p>
                                </div>
                                <div class="flex-item first">
                                    <p> Ejercicio </p>
                                </div>
                                <div class="flex-item first">
                                    <p> Series </p>
                                </div>
                                <div class="flex-item first">
                                    <p> Desempeño </p>
                                </div>
                                <div class="flex-item first">
                                    <p> Notas </p>
                                </div>
                            </div>
                            <%const userDeportes = deportes.filter(deporte => deporte.user_id == user._id);%>

                            <% if (userDeportes.length> 0) { %>
                                <% userDeportes.forEach(deporte=> { %>
                                    <a class="single" href="/deportes/<%= deporte._id%>">
                                        <div class="flex-table">
                                            <div class="flex-item">
                                                <p ><%=deporte.nombre%></p>
                                            </div>
                                            <div class="flex-item">
                                                <p><%=deporte.ejercicio%></p>
                                            </div>
                                            <div class="flex-item">
                                                <p ><%=deporte.series%></p>
                                            </div>
                                            <div class="flex-item">
                                                <p ><%=deporte.desempeño%></p>
                                            </div>
                                            <div class="flex-item">
                                                <p><%=deporte.notas%></p>
                                            </div>
                                        </div>   
                                    </a>
                                    <% }) %>

                                        <% } else { %>
                                            <p> No hay deportes que mostrar ):</p>
                                          
                                            <% } %>

                                            <h2> publicaciones</h2>

                <div class="flex-table">
                    <div class="flex-item first">
                        <p> Titulo </p>
                    </div>
                    <div class="flex-item first">
                        <p> descripcion </p>
                    </div>
                    <div class="flex-item first">
                        <p> Cuerpo </p>
                    </div>
                </div>
                <%const userBlogs = blogs.filter(blog => blog.user_id == user._id);%>

                <% if (userBlogs.length > 0) { %>
                    <% userBlogs.forEach(blog => { %>

                    <a class="single" href="/blogs/<%= blog._id%>">
                        <div class="flex-table">
                            <div class="flex-item">
                                <p ><%=blog.titulo%></p>
                            </div>
                            <div class="flex-item">
                                <p ><%=blog.descripcion%></p>
                            </div>
                            <div class="flex-item">
                                <p ><%=blog.cuerpo%></p>
                            </div>
                        </div>   
                    </a>
                   

                    <% }) %>
                <% } else { %>
                    <p> No hay publicaciones que mostrar ):</p>
                <% } %>
      
    </div>
    
    
    
    
            </div>
            
        </div>
        <%- include('./partials/rightSideBar.ejs') %>


    </div>
</div>
<%- include('./partials/scripts.ejs') %> 

</body>

<script>
    const trashcan = document.querySelector('user.delete');

    trashcan.addEventListener('click', (e) => {
        const endpoint = `/users/${trashcan.dataset.doc}`;

        fetch(endpoint, {
            method: 'DELETE'
        })
        .then((response) => response.json())
        .then((data) => window.location.href = data.redirect)
        .catch((err) => console.log(err));
    })
</script>

</html>
